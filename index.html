<!DOCTYPE html>
<html>
<head>
    <title>Default Panel</title>
    <link rel="stylesheet" href="./css/popup.css">
    <link rel="stylesheet" href="./css/map.css">
    <link rel="stylesheet" href="./css/deploy.css">
    <link rel="stylesheet" href="./css/audit.css">
    <link rel="stylesheet" href="./css/audit-resources.css">
    <link rel="stylesheet" href="./css/common.css">
</head>
<body>
<div id="backdrop">
    Loading...
</div>
<div class="ccthis"></div>
<div class="modal-window hidden">
    <div class="modal-content">
        <span class="close noselect">x</span>
        <img src="./images/visualization1.png" alt="">
    </div>
</div>
<div class="main-container">
    <div class="container">
        <div class="options-container">
            <div class="resource-type-toggle">
                <div class="resource-type audit-res"
                     value="audit">audit <span></span></div>
                <div class="resource-type deploy-res"
                     value="deploy">resources <span></span></div>
                <div class="resource-type map-res"
                     value="map">map <span></span></div>
            </div>
        </div>
        <div class="data-container">
            <div class="deploy hidden">
                <div class="resource-list-header">
                    <div class="sort-label active type" key="resourceType">resource type</div>
                    <div class="sort-label name" key="resourceName">resource name</div>
                    <div class="sort-label status" key="engineStatus">status</div>
                    <div class="sort-label action" key="action">action</div>
                    <div class="sort-label executionTime" key="executionTime">execution time</div>
                    <div class="sort-label status-timestamp" key="timestamp">timestamp</div>
                </div>
                <div class="messages error hidden">
                    <div class="messages-container">
                        <div class="message-left-part">
                            <span class="message-status">ERROR</span>
                            <span class="amount"></span>
                            <span class="message">resources not executed</span>
                        </div>
                        <div class="message-right-part">
                            Next execution: <span>23h 24m 12s</span>
                        </div>
                    </div>
                </div>
                <div class="messages alert hidden">
                    <div class="messages-container">
                        <div class="message-left-part">
                            <span class="message-status">ALERTS</span>
                            <span class="amount"></span>
                            <span class="message"></span>
                        </div>
                        <div class="message-right-part">
                            Next execution: <span>23h 24m 12s</span>
                        </div>
                    </div>
                </div>
                <div class="messages ok hidden">
                    <div class="messages-container">
                        <div class="message-left-part">
                            <span class="message-status">OK</span>
                        </div>
                        <div class="message-right-part">
                            Next execution: <span>23h 24m 12s</span>
                        </div>
                    </div>
                </div>
                <div class="resources-list bg-white "></div>
                <div class="pagination">
                    <div class="resources-amount"></div>
                    <div class="pages"></div>
                </div>
            </div>
            <div class="deploy hidden">
                <div id="no-deploy-resources" class="hidden">This execution has no additional resources.</div>
            </div>
            <div class="audit hidden">
                <div id="no-violation-resources" class="hidden">
                    This composite has no audit resources.<br/>
                    <span class="browse-compostites">Browse featured Composites</span> to see available audits.
                </div>
                <div id="no-violations-view" class="hidden">
                    <div class="no-violations-cont md-shadow">
                        <div class="header">
                            BEST PRACTICE VIOLATIONS<br/>
                            <span>ZERO, ZIP, NADA</span>
                        </div>
                        <div class="data">
                            <div class="flex-grow">
                                <div class="circle"></div>
                            </div>
                            <div class="flex-column flex-grow">
                                <div class="history-title">Infrastructure Status</div>
                                <div class=" flex-row separator-top">
                                    <div class="history"></div>
                                    <div class="info">100% AWESOME</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tip">A tip of the hat to you, DevOps Jedi.</div>
                </div>
            </div>
            <div class="audit flex-row hidden">
                <div class="left-column layout-padding-right">
                    <div class="pie-data-header">24 Audit Violations</div>
                    <div class="custom-dropdown noselect layout-margin-bottom-20">
                        <div class="dropdown-button">
                            <div>SORT BY</div>
                            <div class="chosen-item-text">Most Recent</div>
                            <input type="hidden" class="chosen-item-value" id="chosen-sorting" value="most_recent">
                            <input type="hidden" class="chosen-item-is-reverse" id="is-reverse" value="true">
                        </div>
                        <ul class="hidden">
                            <li data-value="level">Severity Level</li>
                            <li data-value="category">Category</li>
                            <li data-value="service">Service</li>
                            <li data-value="region">Region</li>
                        </ul>
                    </div>
                    <div class="pie"></div>
                    <div class="additional-info separator-top layout-margin-top flex-row">
                        <div class="checks"></div>
                        <div class="passed link"></div>
                        <div class="disabled link"></div>
                    </div>
                </div>
                <div class="flex-grow">
                    <div id="advisor-errors"></div>
                    <div class="list"></div>

                    <div id="popup" class="hidden">
                        <div class="backdrop"></div>
                        <div class="popup-body">
                            <div class="close">X</div>
                            <div class="popup-content"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="map layout-padding hidden bg-white md-shadow">
            </div>
        </div>
    </div>
</div>


<div class="hidden">

    <div id="map-region-tpl">
        <div class="map-region">
            <div class="map-data-header">{{:region}}</div>
            <div class="flex-row">
                <div class="regions-list">
                    <div class="region">
                        {{for subregions}}
                            <div class="regions-subheader">{{:key}}</div>
                            <div class="resources">
                                <div class="flex-row"><div class="deploy-bubble"></div> {{:deployed}} Resources Deployed</div>
                                <div class="flex-row"><div class="violation-bubble"></div>{{:violations}} Violations Found in Audit</div>
                            </div>
                        {{/for}}
                        {{if subregionsWithoutData}}
                            <div class="regions-subheader">{{:subregionsWithoutData}}</div>
                            <div class="resources"><div class="none">None</div></div>
                        {{/if}}
                    </div>
                </div>
                <div class="flex-row region-img {{:cssClass}}"></div>
            </div>
        </div>
    </div>

    <div id="global-region-tpl">
        <div class="global-region-chart">
            <img src="images/maps/{{:key}}.png"/>
            <div class="global-resources-list {{:key}}">
            </div>
        </div>
    </div>

    <div id="error-tpl">
        <div class="error">
            <div class="label">Error Message:</div>
            <div class="error-details"><span class="error-label">Error message: </span>{{:error_message}}</div>
            <div class="error-type"><span class="error-label">Error type: </span> {{:error_type}}</div>
            <div class="error-resource"><span class="error-label">Resource error: </span> {{:resource_error}}</div>
        </div>
    </div>

    <div id="list-header-tmpl">
        <div class="flex-row align-center">
            <div class="subheader flex-grow">{{:name}}</div>
            <div id="high-counter" class="font-12 medium-grey">{{:resultsCount}} VIOLATIONS</div>
        </div>
    </div>

    <div id="show-all-btn-tmpl">
        <div class="show-all">
            View all
        </div>
    </div>

    <div id="resource-row-tmpl">
        <div class="resource-row">
            <div class="view-row {{:engineStatusClass}}">
                <div class="type">{{:resourceType}}</div>
                <div class="name">{{:resourceName}}</div>
                <div class="status">{{:engineStatus}}</div>
                <div class="action">{{:action}}</div>
                <div class="executionTime">{{:executionTime}}</div>
                <div class="status-timestamp">{{:timestamp}}</div>
            </div>
            <div class="expandable-row hidden">
                <div class="logs">
                    <div class="inputs logs-output">
                        <div class="data-cont " resource="{{:_id}}">
                            <div class="label">Inputs:</div>
                        </div>
                        <div class='view-more layout-padding-8 hidden'>...<br/><br/> <span class="openInputs link" resource="{{:_id}}">view more</span></div>
                    </div>
                    <div class="outputs logs-output">
                        <div class="data-cont">
                            <div class="label">Outputs:</div>
                        </div>
                        <div class='view-more layout-padding-8 hidden'>...<br/><br/><span class="openInputs link" resource="{{:_id}}">view more</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="violation-error-tpl">
        <div class="advisor-error">
            <div class="view-row">
                <div>{{:resourceType}}</div>
                <div>{{:resourceName}}</div>
                <div><b>Error</b></div>
                <div>{{:inputs.action}}</div>
                <div class="medium-grey">{{:timestamp}}</div>
            </div>
            <div class="expandable-row hidden" style="display: none;">
                <div class="logs">
                    <div class="inputs logs-output">
                        <div class="label">Inputs:</div>
                        {{for rawInputs}}
                            <div class="flex-row">
                                <div>{{:name}}: </div><div class="layout-padding-left">{{:value}}</div>
                            </div>
                        {{/for}}
                    </div>
                    <div class="outputs logs-output">
                        <div class="label"><b>Error Message</b></div>
                        {{for rawOutputs}}
                            <div class="flex-column">
                                <div>{{:value.error_message}}</div>
                                <div>Error type: {{:value.error_type}}</div>
                                <div>Error resource: {{:value.resource_error}}</div>
                            </div>
                        {{/for}}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="audit-resources-tpl">
        <div class="row audit-resources">
            <div class="header flex-row">
                <div class="flex-grow">
                    <div><b>{{:title}}</b></div>
                    <div>ID: {{:id}}</div>
                </div>
                <div class="level">{{:level}}</div>
                <div># Resources</div>
            </div>
            <div class="res-list">
                {{for resources}}
                <div class="audit-resource">
                    <div class="audit-resource-info flex-row layout-margin-bottom-8">
                        <div class="resource-id flex-grow">{{:id}}</div>
                        <div>{{:resourceName}}</div>
                        <div>{{:#parent.parent.data.service}}</div>
                        <div>{{:#parent.parent.data.region}}</div>
                    </div>
                    <div class="tags">
                        {{for tags}}
                        <div>{{:key}}: {{:value}}</div>
                        {{/for}}
                    </div>
                </div>
                {{/for}}
            </div>
        </div>
    </div>

    <div id="row-tmpl">
        <div class="flex-column row bg-white">
            <div class="flex-column layout-padding ">
                <div class="flex-row row-header flex-wrap">
                    <div class="flex-column flex-grow layout-padding-right">
                        <div class="title">{{:title}}</div>
                        <div class="violation-id">AlertId: {{:id}}</div>
                    </div>
                    <div class="medium-grey layout-padding-right">{{:level}}</div>
                    <div class="medium-grey">{{:resources.length}} Resources</div>
                </div>
                <div class="details-btn link">+ view details</div>
            </div>
            <div class="row-body hidden" style="display: none;">
                <div class="flex-row separator-top flex-wrap">
                    <div class="flex-column separator-right flex-grow">
                        <div class="layout-padding">
                            <div class="layout-margin-bottom-8">
                                <i>Category</i><br/>
                                {{:category}}
                            </div>
                            <div>
                                <i>Description</i><br/>
                                {{:description}}
                            </div>
                        </div>
                        <div class="bg-light-grey layout-padding">
                            <i>Suggested Fix</i><br/>
                            {{:fix}}
                        </div>
                    </div>
                    <div class="flex-column row-right-column layout-padding">
                        <div class="link flex resources-link" violation="{{:id}}" violationId="{{:violationId}}" sortKey="{{:sortKey}}"
                             reportId="{{:reportId}}">
                            {{:resources.length}} Resources
                            <img src="./images/right-chevron.svg" class="fa right"/>
                        </div>
                        <div class="link flex more-info-link" violation="{{:violationId}}">
                            <span>more info</span>
                            <img src="./images/right-chevron.svg" class="fa right"/>
                        </div>
                        <div class="separator-top layout-margin-top-8 layout-margin-bottom-8"></div>
                        <div class="link flex share-link" violation="{{:violationId}}">
                            <img src="./images/envelope.svg" class="fa left"/>
                            share
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="./js/jquery-2.2.4.min.js"></script>
<script type="text/javascript" src="./js/jsrender.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script type="text/javascript" src="./js/utils.js"></script>
<script type="text/javascript" src="./js/pie.js"></script>
<script type="text/javascript" src="./js/static-map.js"></script>
<!--<script type="text/javascript" src="./js/map.js"></script>-->
<script type="text/javascript" src="./js/deploy.js"></script>
<script type="text/javascript" src="./js/audit.js"></script>
<script type="text/javascript" src="./js/script.js"></script>
</body>
</html>